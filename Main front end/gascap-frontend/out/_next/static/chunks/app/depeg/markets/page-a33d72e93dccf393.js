(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{3406:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>n});var s=a(5155),i=a(2115),r=a(574),l=a(4269);let n=r.bL,d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.B8,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});d.displayName=r.B8.displayName;let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.l9,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});c.displayName=r.l9.displayName;let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.UC,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});o.displayName=r.UC.displayName},6e3:(e,t,a)=>{Promise.resolve().then(a.bind(a,6467))},6467:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(5155),i=a(2115),r=a(1647),l=a(4001),n=a(3406);function d(e){let{filter:t,onFilterChange:a}=e;return(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(n.tU,{value:t,onValueChange:a,children:(0,s.jsxs)(n.j7,{className:"h-8 bg-white/5 p-0.5 rounded-sm",children:[(0,s.jsx)(n.Xi,{value:"all",className:"rounded-sm font-bold text-[9px] uppercase tracking-wider data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-3 h-7",children:"All"}),(0,s.jsx)(n.Xi,{value:"usdc",className:"rounded-sm font-bold text-[9px] uppercase tracking-wider data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-3 h-7",children:"USDC"}),(0,s.jsx)(n.Xi,{value:"usdt",className:"rounded-sm font-bold text-[9px] uppercase tracking-wider data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-3 h-7",children:"USDT"}),(0,s.jsx)(n.Xi,{value:"basket",className:"rounded-sm font-bold text-[9px] uppercase tracking-wider data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-3 h-7",children:"Basket"})]})})})}var c=a(2271),o=a(731),u=a(2363),m=a(8884),x=a(4284),p=a(6204),f=a(1064),b=a(1480),h=a(2619),g=a.n(h);function v(){let[e,t]=(0,i.useState)([]),[a,n]=(0,i.useState)([]),[h,v]=(0,i.useState)(!0),[j,N]=(0,i.useState)(null),[S,w]=(0,i.useState)("all"),[y,U]=(0,i.useState)(null),[k,D]=(0,i.useState)(null),C=(0,i.useCallback)(async()=>{try{let e=await (0,m.Js)(["USDC/USD","USDT/USD","FLR/USD","BTC/USD","ETH/USD"]);n(e),N(null);let a=e.find(e=>"USDC/USD"===e.feedName),s=e.find(e=>"USDT/USD"===e.feedName);if(a&&s){let e=(0,m.Ol)(a.value,s.value),i=x.zj.map(t=>{let i,r;return"usdc-depeg"===t.id?(i=a.value,r=m.y0["USDC/USD"]):"usdt-depeg"===t.id?(i=s.value,r=m.y0["USDT/USD"]):(i=e,r="Composite: USDC + USDT"),{...x.L1,id:t.id,stablecoin:t.stablecoin,name:t.name,barrier:t.barrier,premiumRate:t.premiumRate,lpApy:t.lpApy,liquidity:t.liquidity,currentPrice:i,distanceToBarrier:(0,m.gI)(i,t.barrier),lastUpdate:a.timestamp,oracleSource:"Flare FTSO v2",feedId:r}});t(i)}}catch(a){console.error("FTSO fetch failed:",a),N((null==a?void 0:a.message)||"Failed to fetch FTSO prices"),0===e.length&&t(x.zj.map(e=>({...x.L1,id:e.id,stablecoin:e.stablecoin,name:e.name,barrier:e.barrier,premiumRate:e.premiumRate,lpApy:e.lpApy,liquidity:e.liquidity,currentPrice:"USDC"===e.stablecoin?.9998:"USDT"===e.stablecoin?1.0001:.9999,distanceToBarrier:(0,m.gI)("USDC"===e.stablecoin?.9998:"USDT"===e.stablecoin?1.0001:.9999,e.barrier)})))}finally{v(!1)}},[]);(0,i.useEffect)(()=>{C();let e=setInterval(C,5e3);return()=>clearInterval(e)},[C]);let T=e.filter(e=>"all"===S||("usdc"===S?"USDC"===e.stablecoin:"usdt"===S?"USDT"===e.stablecoin:"basket"!==S||"USDC/USDT"===e.stablecoin));return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#050505] text-foreground font-body",children:[(0,s.jsxs)("header",{className:"h-16 bg-[#0a0a0a]/90 border-b border-white/5 flex items-center px-6 justify-between shrink-0 z-50 backdrop-blur-md sticky top-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)(g(),{href:"/depeg",className:"flex items-center gap-2 text-muted-foreground hover:text-white transition-colors",children:[(0,s.jsx)(p.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Depeg Home"})]}),(0,s.jsx)("div",{className:"h-6 w-px bg-white/10"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"w-5 h-5 text-indigo-400"}),(0,s.jsx)("h1",{className:"font-bold text-sm tracking-tight text-white leading-none uppercase",children:"All Markets"}),(0,s.jsx)(r.E,{className:"text-[7px] h-3.5 px-1 bg-emerald-500/15 text-emerald-400 border-emerald-500/20 font-black uppercase tracking-wider",children:"Live"})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-indigo-500/10 border border-indigo-500/20 rounded-full text-[10px] text-indigo-400 font-bold uppercase tracking-tight",children:[(0,s.jsx)(b.A,{className:"w-3.5 h-3.5"})," FTSO v2 Live"]})})]}),(0,s.jsxs)("main",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,s.jsx)(d,{filter:S,onFilterChange:w}),(0,s.jsx)("div",{className:"space-y-2",children:T.map(e=>(0,s.jsx)(l.H,{market:e,onBuyProtection:U,onAddLiquidity:D},e.id))}),0===T.length&&(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground/40 text-sm",children:"No markets match the current filter."})]}),(0,s.jsx)("div",{className:"w-[320px] border-l border-white/5 shrink-0 overflow-y-auto bg-black/40 p-4",children:(0,s.jsx)(c.z,{prices:a,loading:h,error:j})})]}),y&&(0,s.jsx)(o.j,{market:y,onClose:()=>U(null)}),k&&(0,s.jsx)(u.X,{market:k,onClose:()=>D(null)})]})}}},e=>{e.O(0,[975,361,184,160,118,744,478,906,441,255,358],()=>e(e.s=6e3)),_N_E=e.O()}]);